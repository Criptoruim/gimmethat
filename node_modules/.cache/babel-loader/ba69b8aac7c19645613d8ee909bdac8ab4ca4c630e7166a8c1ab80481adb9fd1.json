{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rui\\\\Desktop\\\\gimmethat\\\\src\\\\components\\\\addProduct.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport '../index.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AddProduct = ({\n  addingTo,\n  onAddProduct,\n  onCancel\n}) => {\n  _s();\n  const [newProductName, setNewProductName] = useState('');\n  const [newProductDescription, setNewProductDescription] = useState('');\n  const [newProductCountry, setNewProductCountry] = useState('');\n  const [picture, setPicture] = useState(null);\n  const [picturePreview, setPicturePreview] = useState(null);\n  const handleAddProduct = async () => {\n    if (!newProductName || addingTo === 'globalFavorites' && (!newProductDescription || !newProductCountry)) {\n      alert('Please fill in all required fields.');\n      return;\n    }\n    try {\n      const formData = new FormData();\n      formData.append('name', newProductName);\n      formData.append('description', newProductDescription);\n      formData.append('country', newProductCountry);\n      if (picture) {\n        formData.append('picture', picture);\n      }\n      const response = await axios.post('http://localhost:3001/api/products', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      // Pass picturePath to onAddProduct\n      onAddProduct(response.data.name, response.data.description, response.data.country, response.data.picturePath);\n\n      // Reset form\n      setNewProductName('');\n      setNewProductDescription('');\n      setNewProductCountry('');\n      setPicture(null);\n      setPicturePreview(null);\n    } catch (error) {\n      if (axios.isAxiosError(error)) {\n        var _error$response;\n        console.error('Axios error message:', error.message);\n        console.error('Axios error response data:', (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n      } else {\n        console.error('Unexpected error:', error);\n      }\n    }\n  };\n  const handleFileChange = e => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (file) {\n      setPicture(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPicturePreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"modal-title\",\n          children: \"Add New Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"picture-upload inline-flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"avatar\",\n            type: \"file\",\n            id: \"file-input\",\n            accept: \"image/*\",\n            style: {\n              display: 'none'\n            },\n            onChange: handleFileChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"upload-button\",\n            onClick: () => {\n              var _document$getElementB;\n              return (_document$getElementB = document.getElementById('file-input')) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.click();\n            },\n            children: \"Upload Picture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), picturePreview && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: picturePreview,\n            alt: \"Product Preview\",\n            className: \"picture-preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Product Name\",\n          className: \"input\",\n          value: newProductName,\n          onChange: e => setNewProductName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), addingTo === 'globalFavorites' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Description\",\n            className: \"input\",\n            value: newProductDescription,\n            onChange: e => setNewProductDescription(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Country\",\n            className: \"input\",\n            value: newProductCountry,\n            onChange: e => setNewProductCountry(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"add-button\",\n          onClick: handleAddProduct,\n          children: \"Add Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cancel-button\",\n          onClick: onCancel,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(AddProduct, \"Wty10Tb92GCDDGH5t4zihxkqSDE=\");\n_c = AddProduct;\nexport default AddProduct;\nvar _c;\n$RefreshReg$(_c, \"AddProduct\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","AddProduct","addingTo","onAddProduct","onCancel","_s","newProductName","setNewProductName","newProductDescription","setNewProductDescription","newProductCountry","setNewProductCountry","picture","setPicture","picturePreview","setPicturePreview","handleAddProduct","alert","formData","FormData","append","response","post","headers","data","name","description","country","picturePath","error","isAxiosError","_error$response","console","message","handleFileChange","e","_e$target$files","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","id","accept","style","display","onChange","onClick","_document$getElementB","document","getElementById","click","src","alt","placeholder","value","_c","$RefreshReg$"],"sources":["C:/Users/Rui/Desktop/gimmethat/src/components/addProduct.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport '../index.css'; \n\ninterface AddProductProps {\n  addingTo: string;\n  onAddProduct: (name: string, description: string, country: string, picturePath: string) => void; // Added picturePath\n  onCancel: () => void;\n}\n\nconst AddProduct: React.FC<AddProductProps> = ({ addingTo, onAddProduct, onCancel }) => {\n  const [newProductName, setNewProductName] = useState('');\n  const [newProductDescription, setNewProductDescription] = useState('');\n  const [newProductCountry, setNewProductCountry] = useState('');\n  const [picture, setPicture] = useState<File | null>(null);\n  const [picturePreview, setPicturePreview] = useState<string | ArrayBuffer | null>(null);\n\n  const handleAddProduct = async () => {\n    if (!newProductName || (addingTo === 'globalFavorites' && (!newProductDescription || !newProductCountry))) {\n      alert('Please fill in all required fields.');\n      return;\n    }\n\n    try {\n      const formData = new FormData();\n      formData.append('name', newProductName);\n      formData.append('description', newProductDescription);\n      formData.append('country', newProductCountry);\n      if (picture) {\n        formData.append('picture', picture);\n      }\n  \n      const response = await axios.post('http://localhost:3001/api/products', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      // Pass picturePath to onAddProduct\n      onAddProduct(response.data.name, response.data.description, response.data.country, response.data.picturePath);\n  \n      // Reset form\n      setNewProductName('');\n      setNewProductDescription('');\n      setNewProductCountry('');\n      setPicture(null);\n      setPicturePreview(null);\n    } catch (error) {\n      if (axios.isAxiosError(error)) {\n        console.error('Axios error message:', error.message);\n        console.error('Axios error response data:', error.response?.data);\n      } else {\n        console.error('Unexpected error:', error);\n      }\n    }\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setPicture(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPicturePreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <div className=\"modal-overlay\">\n      <div className=\"modal-container\">\n        <div>\n          <h3 className=\"modal-title\">Add New Product</h3>\n          <div className=\"picture-upload inline-flex\">            \n            <input className='avatar'\n              type=\"file\"\n              id=\"file-input\"\n              accept=\"image/*\"\n              style={{ display: 'none'}}\n              onChange={handleFileChange}\n            />\n            <button className=\"upload-button\" onClick={() => document.getElementById('file-input')?.click()}>\n              Upload Picture\n            </button>\n            {picturePreview && (\n              <img\n                src={picturePreview as string}\n                alt=\"Product Preview\"\n                className=\"picture-preview\"\n              />\n            )}\n          </div>\n        </div>\n        <div className=\"modal-body\">\n          <input\n            type=\"text\"\n            placeholder=\"Product Name\"\n            className=\"input\"\n            value={newProductName}\n            onChange={(e) => setNewProductName(e.target.value)}\n          />\n          {addingTo === 'globalFavorites' && (\n            <>\n              <input\n                type=\"text\"\n                placeholder=\"Description\"\n                className=\"input\"\n                value={newProductDescription}\n                onChange={(e) => setNewProductDescription(e.target.value)}\n              />\n              <input\n                type=\"text\"\n                placeholder=\"Country\"\n                className=\"input\"\n                value={newProductCountry}\n                onChange={(e) => setNewProductCountry(e.target.value)}\n              />\n            </>\n          )}\n        </div>\n        <div className=\"modal-footer\">\n          <button className=\"add-button\" onClick={handleAddProduct}>\n            Add Product\n          </button>\n          <button className=\"cancel-button\" onClick={onCancel}>\n            Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AddProduct;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}